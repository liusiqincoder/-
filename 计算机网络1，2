第一章  概述（2018.9.12）
三种比较熟悉的网络:电信网络，有线电视网络，计算机网络
互联网的基本特点：连通性和共享
计算机网络   若干节点和链路组成
           网路之间由路由器互连，组成更大的网络，成为互联网
           
互联网发展的三个阶段：1.美国国防部于1969创建的分组交换网ARPANET向互联网发展的阶段
                   2.建成了三级结构的互联网（主干网，地区网，校园网或企业网）
                   3.逐步形成了多层次的ISP（互联网服务提供者）结构的互联网
                        ISP:主干ISP，地区ISP，本地ISP
                     主机a->本地ISP->地区ISP->主干ISP->地区ISP->本地ISP->主机b
互联网交换点IXP(为了弥补ISP的不足，提高交换分组的速度)，允许两个网络直接相连并交换分组，不需要第三方网络来交换分组

互联网的标准化工作
    组织:互联网体系结构委员会（IBA）（下属:互联网工程部IETF和互联网研究部IRTF）
    标准化阶段：互联网草案--建议标准--互联网标准
 组成：边缘部分  由所有连接在互联网上的主机组成
         通信方式：客户端-服务器方式（客户是服务请求方，服务器是服务提供方）
                  对等连接方式  双方都是服务器或客户机
      核心部分   互联网+路由器
                电路交换：建立连接-》通话（两用户始终占用端到端的通信资源）-》释放连接
                分组交换：（采用存储转发技术）
                     优点：高效，灵活，迅速，可靠
                单个网络=链路，路由器=结点(转发分组)
         
 计算机网络的定义：计算机网络主要是由一些通用的，可编程的硬件互连而成的，而这些硬件并非用来实现某一特定的目的
        分类：1.作用范围
             广域网WAN 几十到几千公里，互联网核心部分，高速链路
             城域网MAN  5到50km
             局域网LAN 1km以内
             个人局域网PAN  10m左右
             2.使用者：公用网和专用网
             接入网AN
    性能指标：1.速率（bit/s）2.带宽（Hz）3.吞吐量（bit/s）4.时延（发送时延+传播时延+处理。。+排队。。）
             5.时延带宽积=传播时延*带宽 6.往返时间RTT 7.利用率  
    非性能特征:质量，费用，标准化，可靠性，可扩展性和可升级性，易于管理和维护      
    体系结构：1.ARPANET提出分层；2.IBM   系统网络体系结构SNA  3.国际标准化组织  开放系统互连参考模型OSI/RM 简称OSI
             基本使用的标准是TCP/IP协议
    网络协议  为进行网络中的数据交换而建立的规则，标准或约定(语法+语义+同步)
    分层优点：1.各层之间是独立的  2.灵活性好  3.结构上可分割开  4.易于实现和维护   5.能促进标准化工作
    体系结构=计算机网络的各层+协议的集合
    
    TCP/IP  应用层  应用进程之间的通信和交互规则
            运输层  （TCP和UDP）向两台主机间的进程之间的通信提供通用的数据传输服务
            网际层   为分组交换网上的不同主机提供通信服务
            网络接口层  为数据加上控制信息，组成帧
    实体：任何可以发送或接收数据的硬件或软件进程
    在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务，要实现本层协议，还需要  \   使用下一层提供的服务
    服务访问点SAP：相邻两层的实体进行交互的地方
    服务数据单元SDU：层与层之间交换的数据的单元
（2018.9.19）
物理层  （在连接各种计算机的传输媒体上传输比特流，屏蔽掉传输媒体和通信手段的差异）
    任务：1.定义了与传输媒体的接口之间的特性（机械特性，电气。。。，功能。。。过程。。。）
         2.完成传输方式的转化(串行->并行)
         
    数据通信  系统模型：源系统（源点，发送器），传输系统，目的系统(接收器，终点)
    信号：模拟信号（连续信号）和数字信号（离散信号）
    信道 用来表示某一方向发送信息的媒体
    通信  单向，双向，双向同时通信
    基带信号  来自信源的信号
    调制  解决基带信号的低频成分不能在信道传输
         基带调制  将数字信号转为另一种形式的数字信号，还是基带信号
            编码方式：归零制，不归零制，曼彻斯特编码，差分曼彻斯特编码
         带通调制  使用载波进行调制，转为模拟信号
            调制方法：调幅，调频，调相
    限制码元在信道上的传输速率的因素：
       信道能够通过的频率范围
          （码间串扰  在接收端收到的信号波形失去了码元之间的清晰界线）
          在任何信道中，码元传输的速率是有上限的，超过此上限会出现严重的码间串扰问题，使接收端对码元的判决成为不可能
       信噪比（=10*log10(S/N) dB）
           信道的极限传输速率C=W*log2（1+S/N）bit/s
             W为信道的带宽（Hz），S为信道内所传信号的平均功率，N为信道内部的高斯噪声功率
     （2018.9.24）
     物理层下面的传输媒体  发送器和接收器之间的物理通路
          1.导引型传输媒体  借助固体媒体传播
              无屏蔽双绞线（&屏蔽双绞线 STP 抗干扰）价格便宜，性能不错，so使用广泛
                  一般使用5类线，速率在100Mbit/s到1Gbit/s
                  影响传输速率的衰减：频率，导线粗细，信号振幅，数字信号编码方式
              同轴电缆  由 导体铜质芯线，绝缘层，网状编织的外导体屏蔽层和保护塑料外层组成 带宽接近1GHz
              光缆：>100Gbit/s
                 多模光纤和单模光纤（贵，但速率高且传输距离远）
                 传输带宽一般在25000-30000GHz
                 需要将光纤制成光缆，再加上保护层
                 优点：通信容量大；传输损耗小，中继距离长；
                      无串音干扰，保密性好；体积小，重量轻。
                       
          2.非导引型传输媒体   无线传输
              频段：LF,MF,HF对应低频，中频（300KHz-3MHZ），高频（3MHZ-30MHZ）
                   V，U，S对应甚高频（30MHZ-300MHZ），特高频（300MHZ-3GHZ），超高频（3GHZ-30GHZ）
              短波通信   通信质量差，低速传输
              无线电传输 地面微波接力通信                  
                  特点：通信信道容量大；传输质量高；投资少，见效快；
                       相邻站必须直视，有时会失真；传播有时受恶劣环境影响；隐蔽性和保密性差；对中继站需要花费较多人力物力;
                      卫星通信还具备通信距离远，比地面微波通信稳定，较大的传播时延，保密性较差
        信道复用 
            频分复用  同样时间占用不同频带（频率带宽）资源
            时分复用  不同时间占用同样频带
               2种都是比较成熟的技术，但是不够灵活
             复用器和分用器之间是用户共享的高速信道，信道利用率不高
             统计时分复用器（STDM） 改进的时分复用，提高信道的利用率（异步时分复用）
                  采用复用器对多个用户的数据进行存储转发，使用户更合理地共享信道
             波分复用WDM 光的频分复用（光纤放大器）
             码分复用CDM(码分多址) 有很强的抗干扰能力
                         采用扩频方式    直接扩频方式DSSS和跳频扩频FHSS
     数字传输系统  
            为了解决 速率标准不统一和不是同步传输
                美国推出 同步光纤网SONET   
                ITU-T  国际标准同步系列SDH
                SDH/SONET  理想的传输网体制
     宽带接入技术
          非对称数字用户线ADSL技术    用数字技术对现有的模拟电话用户线进行改造，使他能够承载宽带数字业务
              传输距离取决于   数据率，用户线的线径和信噪比
              在用户线两端安装调制解调器（ATU,ATU-C），不能保证固定的数据率
              基于ADSL的接入网由 数字用户线接入复用器DSLAM，用户线和用户家中的一些设施(ADSL调制解调 器和电话分离器)组成
              ADSL分类：SDSL(适合企业)，HDSL（高速数字用户线），VDSL（短距离传输）。。。。
          光纤同轴混合网（HFC网）有线电视网基础上开发的居民宽带接入网。（电缆调制解调器）
          FTTx技术   将光纤的资源分配到广大用户家里
              光配线网ODN   光纤干线和广大用户之间
                  光线路终端OLT 连接到光纤干线的终端设备
                  1：N光分路器   广播方式向用户端的光网络单元ONU发送数据
                采用波分复用
                分类  以太网无源光网络EPON（兼容性好，成本低扩张性好，管理方便）
                     吉比特无源光网络GPON（可承载多业务，有质量保障）
                     
数据链路层    局域网范围
     点对点信道的数据链路层
         链路：一个结点到另一个结点的一段物理线路，无交换节点
         数据链路：物理线路+通信协议（由线路上的硬件和软件实现  如：适配器）
         帧：协议数据单元
         进行通信时的主要步骤：1，结点a从网络下发的ip数据封装成帧 2，发给结点b的数据链路层  
               3，接收结点b发来的帧，提取数据交给网络层
         3个基本问题：
              封装成帧
                帧 由数据和首部和尾部（确定帧的界限以及控制信息）组成
                数据部分<=最大传送单元MTU
              透明传输
                对用户来说不管键入什么数据，数据部分都不会出现SOH或EOT这样的转义字符
                通过 字节填充 或 字符填充（插入转义字符） 实现
              差错检测
                 比特在传输的过程中可能出现错误
                 误码率 
                 循环冗余检测CRC（减少误码率）
                 帧丢失，帧重复，帧失序
                 对于质量好的数据链路，，改正差错的任务交给上层协议，
                     质量差的。。。。。。。。。。。。。数据链路层协议使用确认和重传机制（高级数据链路控制HDLC 或 点对点协议PPP）
            点对点PPP协议  用户计算机和ISP进行通信时所使用的数据链路层协议
                简单，封装成帧，透明性，多种类型链路，差错检测，检测连接状态，最大传送单元，网络层地址协商，数据压缩协商
                三个组成部分：一个将IP数据报封装到串行链路的方法；
                            用来建立，配置，测试数据链路连接的链路控制协议LCP；
                            一套网络控制协议NCP
                帧格式  首部（4个字段）的第一个字段和尾部（2个）第二个字段为false，即0x7E;信息字段；
                   PPP异步传输时采用字节填充防止信息字段和标志字段一个的情况
                PPP协议用在SONET/SDH链路时使用同步传输，采用零比特填充（5个连续1填入零）实现透明传输
                PPP链路连接：（用户拨号接入ISP）（链路静止）建立用户到ISP的物理连接-->用户向ISP发送链路控制协议LCP分组，(LCP配置协商，
                         发送配置请求帧)建立LCP连接-->鉴别-->网络控制协议NCP给用户发送临时的IP地址-->链路打开-->通信完毕，
                         NCP依次释放网络层连接，数据链路层连接，物理层连接（链路静止）
                         
             使用广播信道的数据链路层（局域网的层次包括数据链路层和物理层）
                 局域网的优点：1.具有广播功能；2.便于系统的扩展和逐渐演变，各设备的位置可灵活调整和改变；
                             3.提高了系统的可靠性，可用性和生存性
                         分类：星型网（集线器的出现使其获得广泛应用），环形网，总线网
                 为解决在共享信道使众多用户能够合理而方便地共享通信媒体资源，有2种方法：静态划分信道和动态媒体接入控制（随机接入和受控接入）
                 以太网的2个标准：1.1982年的DIX Ethernet V2  2.IEEE的IEEE 802.3[W-IEEE802.3]  （两种差不多）
                 计算机和局域网的连接通过通信适配器（又称为网络接口卡NIC或网卡,装有RAM和ROM）进行的
                        局域网与NIC的通信   通过电缆或双绞线串行传输
                        NIC与计算机的通信       计算机主板上的I/O总线并行传输
                           NIC的重要功能  数据串行传输和并行传输的转换
                        适配器接受和处理帧时不使用CPU，自己处理好后通知计算机，并交给网络层
                        计算机发送IP数据报时，由协议栈交给适配器，适配器组装成帧后发送到局域网
                  为了通信的简便，以太网采用以下两种措施：
                      1.无连接的工作方式   对有差错的帧是否进行重传由高层决定
                          如何协调总线上的各计算机的工作时以太网要解决的问题，以太网采用CSMA/CD协议（载波监听多点接入/碰撞检测）
                      2.以太网发送的数据使用曼彻斯特编码的信号
                          
                  CSMA/CD协议要点 1.多点接入   2.载波监听  每个站不停地检测信道
                                 3.碰撞检测   边发送边监听
                           只能进行双向交替通信
                  以太网发送的不确定性，只能使以太网的平均通信量远小于最高数据率
                       使用二进制指数退避算法确定重传时机
                       规定最短帧长64字节
                       强化碰撞，发生碰撞，应立即停止发送数据外，还要继续发送32或48比特的人为干扰信号
                       帧间最小间隔9.6us
                  使用集线器的星形拓扑    使用双绞线传输，中间用集线器连接
                      各站中的适配器执行CSMA/CD协议
                      特点：1.使整个系统像一个传统以太网一样运行；2.一个集线器有许多接口；3.工作在物理层，每个接口简单地转发比特
                            4.能进行自适应串音回波抵消
                  以太网的利用率   要提高利用率就要降低以太网单程端到端时延与帧的发送时间之比
                  以太网的MAC层（局域网中，硬件地址又称为物理地址或MAC地址）
                      局域网中的电脑地址指的是固定在适配器中的ROM中的地址（基本上都是6字节的MAC地址）
                      IEEE的注册管理机构RA负责MAC的前3位（组织唯一标识符OUI），后三位由适配器生产商指派（扩展标识符）
                      适配器接受网络上发来的帧并过滤（识别是单播帧，广播帧还是多播帧）
                  MAC帧的格式
                      标准：1.DIX Ethernet V2标准（以太网V2标准，常用）2.IEEE的802.3标准
                      以太网V2标准  目的地址（6）+源地址（6字节）+类型字段（2）+数据（46-1500）+帧校验序列FCS
                        曼彻斯特编码能确定数据字段的结束位置（电压不变时的位置向前4个字节）
                        数据字段不足46字节时（MAC子层）自动填充（IP数据报首部有数据段总长度，可以确定数据段）
                        为了使适配器与比特流达成同步，必须在MAC帧的首部加上8字节（7字节的前同步码+1字节的帧开始界定符）(SONET/SDH不需要)
                        规定了无效的帧
